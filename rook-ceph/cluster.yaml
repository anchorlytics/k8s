apiVersion: ceph.rook.io/v1
kind: CephCluster
metadata:
  name: rook-ceph
  namespace: rook-ceph
spec:
  cephVersion:
    image: ceph/ceph:v15.2.4
  dashboard:
    enabled: true
    type: LoadBalancer
  monitoring:
    enabled: true
  mgr:
    modules:
      - name: pg_autoscaler
        enabled: true
  dataDirHostPath: /var/lib/rook
  storage:
    useAllNodes: true
    devicePathFilter: '^/dev/mapper/ceph-'
    config:
      encryptedDevice: true
    nodes:
      - jericho:
        config:
          metadataDevice: /dev/nvme0n1p1
  placement:
    all:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
            - matchExpressions:
              - key: role
                operator: In
                values:
                  - ceph

